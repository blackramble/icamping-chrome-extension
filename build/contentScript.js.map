{"version":3,"file":"contentScript.js","mappings":"mBAEA,MAAMA,EAAYC,SAASC,KAAKC,qBAAqB,SAAS,GAAGC,UACjEC,QAAQC,IACJ,mBAAmBN,gEAIvBO,OAAOC,QAAQC,UAAUC,aAAY,CAACC,EAASC,EAAQC,KAKnD,GAJqB,UAAjBF,EAAQG,MACRT,QAAQC,IAAI,oBAAoBK,EAAQI,QAAQC,SAG/B,WAAjBL,EAAQG,KAAmB,CAE3B,GADAT,QAAQC,IAAI,mBACRL,SAASgB,uBAAuB,oBAAoB,GACpD,OAEJ,MAGMC,EAHeC,MAAMC,KACvBnB,SAASgB,uBAAuB,cAEJI,KAAKC,IACjC,MACMC,EAAQD,EAAKE,iBAAiB,OAAO,GACrCC,EAASH,EAAKE,iBAAiB,0BAA0B,GACzDE,EAAqBJ,EAAKE,iBAAiB,eAC3CG,IAAWL,EAAKE,iBAAiB,mBAAmB,GACpDI,EAAUF,EAAmB,GAAGG,UAAUC,OAAOC,MAAM,KACvDC,EAAQJ,EAAQ,GAChBK,EAAOL,EAAQ,GACfM,EACFR,EAAmB,GAAGG,UAAUC,OAAOK,MAT1B,QAS0C,IAAM,EAC3DC,EAAKb,EAAMc,IACXC,EAASf,EAAMgB,IAErB,MAAO,CAAEH,KAAII,KADAf,EAAOI,UACDS,SAAQN,QAAOC,OAAMC,SAAQP,SAAQ,IAE5D,GAA0B,IAAtBT,EAAWuB,OAAc,OAE7B,MAAMC,EAAQzC,SAAS0C,cAAc,OACrCD,EAAME,UAAUC,IAAI,oBACpB,MAAMC,EAAW7C,SAAS0C,cAAc,UACxCG,EAAS1C,UAAY,iCACrB0C,EAASC,MAAMC,QACX,kJACJN,EAAMK,MAAMC,QACR,8QAEJ/C,SAASgD,KAAKC,YAAYR,GAC1BzC,SAASgD,KAAKC,YAAYJ,GAG1BA,EAASK,iBAAiB,SAAS,KACP,SAAxBT,EAAMK,MAAMK,QACLV,EAAMK,MAAMK,QAAU,OACtBV,EAAMK,MAAMK,QAAU,MAAO,IAGxClC,EAAWmC,SAAS/B,IAChB,IAAKA,EAAKK,OAAQ,CACd,MAAM2B,EAAUrD,SAAS0C,cAAc,KACvCW,EAAQC,KAAO,gCAAgCjC,EAAKc,KACpDkB,EAAQE,OAAS,SACjBF,EAAQP,MAAMC,QACV,sFACJM,EAAQlD,UAAY,qGAEJkB,EAAKgB,gPAGPhB,EAAKkB,oGAGLlB,EAAKU,SAASV,EAAKW,uGAGhBX,EAAKY,+GAMtBQ,EAAMQ,YAAYI,EACtB,IAER,CAKA,OADAzC,EAAa,CAAC,IACP,CAAI,G","sources":["webpack://icamping-chrome-extension/./src/contentScript.js"],"sourcesContent":["'use strict';\n\nconst pageTitle = document.head.getElementsByTagName('title')[0].innerHTML;\nconsole.log(\n    `Page title is: '${pageTitle}' - evaluated by Chrome extension's 'contentScript.js' file`\n);\n\n// Listen for message\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n    if (request.type === 'COUNT') {\n        console.log(`Current count is ${request.payload.count}`);\n    }\n\n    if (request.type === 'CHANGE') {\n        console.log(`Change Event On`);\n        if (document.getElementsByClassName('dialog-extension')[0]) {\n            return;\n        }\n        const bigheroArray = Array.from(\n            document.getElementsByClassName('smallhero')\n        );\n        const filterData = bigheroArray.map((item) => {\n            const numRegex = /\\d+/g;\n            const imgEl = item.querySelectorAll('img')[0];\n            const nameEl = item.querySelectorAll('.dark-grey-text strong')[0];\n            const addressAndHeightEl = item.querySelectorAll('.f13 strong');\n            const isFull = !!item.querySelectorAll('.danger-bg-text')[0];\n            const address = addressAndHeightEl[0].innerText.trim().split('・');\n            const state = address[0];\n            const town = address[1];\n            const height =\n                addressAndHeightEl[1].innerText.trim().match(numRegex)[0] ?? 0;\n            const id = imgEl.alt;\n            const imgUrl = imgEl.src;\n            const name = nameEl.innerText;\n            return { id, name, imgUrl, state, town, height, isFull };\n        });\n        if (filterData.length === 0) return;\n\n        const modal = document.createElement('div');\n        modal.classList.add('dialog-extension');\n        const floatBtn = document.createElement('button');\n        floatBtn.innerHTML = '<p style=\"margin:auto;\">開關</p>';\n        floatBtn.style.cssText =\n            'background-color: #134B43;color:white;position: fixed;bottom: 3rem;right: 3rem;border-radius: 50%;width: 100px;height: 100px;z-index: 99999999;';\n        modal.style.cssText =\n            'z-index:9999999; width: 100%; height:100%; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);display:flex; flex-direction: row; flex-wrap: wrap; overflow:scroll; gap:20px;';\n\n        document.body.appendChild(modal);\n        document.body.appendChild(floatBtn);\n\n        const isClose = false;\n        floatBtn.addEventListener('click', () => {\n            modal.style.display === 'flex'\n                ? (modal.style.display = 'none')\n                : (modal.style.display = 'flex');\n        });\n\n        filterData.forEach((item) => {\n            if (!item.isFull) {\n                const newCard = document.createElement('a');\n                newCard.href = `https://m.icamping.app/store/${item.id}`;\n                newCard.target = '_blank';\n                newCard.style.cssText =\n                    'display:flex; flex:1; padding:0.5rem;border: 1px solid #a0a0a0;border-radius: 10px;';\n                newCard.innerHTML = `\n                <div style=\"display:flex; flex-direction: row;\">\n                    <img src=\"${item.imgUrl}\" style=\"width:300px; height:200px;\"/>\n                    <div style=\"white-space: nowrap; padding:3rem; display:flex; flex-direction: column;justify-content: center;\">\n                        <div>\n                            ${item.name}\n                        </div>\n                        <div>\n                            ${item.state}・${item.town}\n                        </div>\n                        <div>\n                            海拔 ${item.height}\n                        </div>\n                    </div>\n                </div>\n                `;\n\n                modal.appendChild(newCard);\n            }\n        });\n    }\n\n    // Send an empty response\n    // See https://github.com/mozilla/webextension-polyfill/issues/130#issuecomment-531531890\n    sendResponse({});\n    return true;\n});\n"],"names":["pageTitle","document","head","getElementsByTagName","innerHTML","console","log","chrome","runtime","onMessage","addListener","request","sender","sendResponse","type","payload","count","getElementsByClassName","filterData","Array","from","map","item","imgEl","querySelectorAll","nameEl","addressAndHeightEl","isFull","address","innerText","trim","split","state","town","height","match","id","alt","imgUrl","src","name","length","modal","createElement","classList","add","floatBtn","style","cssText","body","appendChild","addEventListener","display","forEach","newCard","href","target"],"sourceRoot":""}